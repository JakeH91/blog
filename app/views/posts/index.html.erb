<!-- <p id="notice"><%= notice %></p> -->

<h1>Posts</h1>
  <% if @posts.exists? %>
    <%#  newestPosts = @posts.reverse 
        oldestPosts = @posts 
        oldestEvents = @posts.sort_by{|post| post[:date_of_event]}
        newestEvents = oldestEvents.reverse 
    %>

    <li class="dropdown">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown">Sort By<b class="caret"></b></a>
      <ul class="dropdown-menu">
        <!-- We are passing the sort parameter here -->
        <li><a href="?sort=1">Newest(Submitted)</a></li>
        <li><a href="?sort=2">Oldest(Submitted)</a></li>
        <li><a href="?sort=3">Newest(Event)</a></li>
        <li><a href="?sort=4">Oldest(Event)</a></li>
      </ul>
    </li>
    
    <% @posts.each do |post| %>
      <div class="post">
        <p class="post_author"><%= post.author[0, 1] %></p>
        <h3 class="post_title"><%= post.title %></h3>
        
        <p class="post_content"><%= post.content %></p>
        <p class="hidden"><%= post.date_of_event %></p>
        <p class="hidden"><%= post.location %></p>
        <div class="post_likes">
          <p>Likes: <%= post.likes %></p>
          <p>Dislikes: <%= post.dislikes %></p>
        </div>
        
        <div class="post_options">
          <p><%= link_to 'Show', post %></p>
          <p><%= link_to 'Edit', edit_post_path(post) %></p>
          <p><%= link_to 'Destroy', post, method: :delete, data: { confirm: 'Are you sure?' } %></p>
        </div>
        

        
      </div>
      <div class="post_comments">
        <h5><strong>Comments</strong></h5>
        <% if post.comments.exists? %>
          <div class="post_comment no-border">
            <p class="post_comment_author"><%= post.comments.last.author[0, 1] %></p>
            <p class="post_comment_content"><%= post.comments.last.content %></p>
            <p class="post_comment_see_more"><%= link_to 'See More', post %></p>
          </div>  
        <% else %>
          <p>Currently No Comments</p>
        <% end %>
      </div> 
    <% end %>
  <% else %>
    <p>Currently No Posts</p>
  <% end %>
<br>